import{_ as c,j as h,f as l,g as f,k as d,O as v,l as p}from"./map.XBgQGlaY.js";var y={now:function(){return Date.now()}},A=(function(n){c(r,n);function r(t,e){return n.call(this)||this}return r.prototype.schedule=function(t,e){return this},r})(h),u={setInterval:function(n,r){for(var t=[],e=2;e<arguments.length;e++)t[e-2]=arguments[e];return setInterval.apply(void 0,l([n,r],f(t)))},clearInterval:function(n){return clearInterval(n)},delegate:void 0},w=(function(n){c(r,n);function r(t,e){var i=n.call(this,t,e)||this;return i.scheduler=t,i.work=e,i.pending=!1,i}return r.prototype.schedule=function(t,e){var i;if(e===void 0&&(e=0),this.closed)return this;this.state=t;var s=this.id,o=this.scheduler;return s!=null&&(this.id=this.recycleAsyncId(o,s,e)),this.pending=!0,this.delay=e,this.id=(i=this.id)!==null&&i!==void 0?i:this.requestAsyncId(o,this.id,e),this},r.prototype.requestAsyncId=function(t,e,i){return i===void 0&&(i=0),u.setInterval(t.flush.bind(t,this),i)},r.prototype.recycleAsyncId=function(t,e,i){if(i===void 0&&(i=0),i!=null&&this.delay===i&&this.pending===!1)return e;e!=null&&u.clearInterval(e)},r.prototype.execute=function(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var i=this._execute(t,e);if(i)return i;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},r.prototype._execute=function(t,e){var i=!1,s;try{this.work(t)}catch(o){i=!0,s=o||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),s},r.prototype.unsubscribe=function(){if(!this.closed){var t=this,e=t.id,i=t.scheduler,s=i.actions;this.work=this.state=this.scheduler=null,this.pending=!1,d(s,this),e!=null&&(this.id=this.recycleAsyncId(i,e,null)),this.delay=null,n.prototype.unsubscribe.call(this)}},r})(A),a=(function(){function n(r,t){t===void 0&&(t=n.now),this.schedulerActionCtor=r,this.now=t}return n.prototype.schedule=function(r,t,e){return t===void 0&&(t=0),new this.schedulerActionCtor(this,r).schedule(e,t)},n.now=y.now,n})(),g=(function(n){c(r,n);function r(t,e){e===void 0&&(e=a.now);var i=n.call(this,t,e)||this;return i.actions=[],i._active=!1,i}return r.prototype.flush=function(t){var e=this.actions;if(this._active){e.push(t);return}var i;this._active=!0;do if(i=t.execute(t.state,t.delay))break;while(t=e.shift());if(this._active=!1,i){for(;t=e.shift();)t.unsubscribe();throw i}},r})(a),I=new g(w),_=I;function b(n){return n instanceof Date&&!isNaN(n)}function k(n,r,t){n===void 0&&(n=0),t===void 0&&(t=_);var e=-1;return r!=null&&(p(r)?t=r:e=r),new v(function(i){var s=b(n)?+n-t.now():n;s<0&&(s=0);var o=0;return t.schedule(function(){i.closed||(i.next(o++),0<=e?this.schedule(void 0,e):i.complete())},s)})}export{I as a,k as t};
