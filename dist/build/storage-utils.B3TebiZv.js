import{c as Q,_ as A,h as S,E as C,j as W,k as X,O as c,b as k,l as Z,i as f,p as R,q as ee,r as j,s as g,t as te,u as re,v as ne,o as b,d as w,m as oe,e as ie}from"./map.XBgQGlaY.js";var ae=Q(function(e){return function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),L=(function(e){A(t,e);function t(){var r=e.call(this)||this;return r.closed=!1,r.currentObservers=null,r.observers=[],r.isStopped=!1,r.hasError=!1,r.thrownError=null,r}return t.prototype.lift=function(r){var n=new _(this,this);return n.operator=r,n},t.prototype._throwIfClosed=function(){if(this.closed)throw new ae},t.prototype.next=function(r){var n=this;S(function(){var o,a;if(n._throwIfClosed(),!n.isStopped){n.currentObservers||(n.currentObservers=Array.from(n.observers));try{for(var i=k(n.currentObservers),s=i.next();!s.done;s=i.next()){var u=s.value;u.next(r)}}catch(l){o={error:l}}finally{try{s&&!s.done&&(a=i.return)&&a.call(i)}finally{if(o)throw o.error}}}})},t.prototype.error=function(r){var n=this;S(function(){if(n._throwIfClosed(),!n.isStopped){n.hasError=n.isStopped=!0,n.thrownError=r;for(var o=n.observers;o.length;)o.shift().error(r)}})},t.prototype.complete=function(){var r=this;S(function(){if(r._throwIfClosed(),!r.isStopped){r.isStopped=!0;for(var n=r.observers;n.length;)n.shift().complete()}})},t.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(t.prototype,"observed",{get:function(){var r;return((r=this.observers)===null||r===void 0?void 0:r.length)>0},enumerable:!1,configurable:!0}),t.prototype._trySubscribe=function(r){return this._throwIfClosed(),e.prototype._trySubscribe.call(this,r)},t.prototype._subscribe=function(r){return this._throwIfClosed(),this._checkFinalizedStatuses(r),this._innerSubscribe(r)},t.prototype._innerSubscribe=function(r){var n=this,o=this,a=o.hasError,i=o.isStopped,s=o.observers;return a||i?C:(this.currentObservers=null,s.push(r),new W(function(){n.currentObservers=null,X(s,r)}))},t.prototype._checkFinalizedStatuses=function(r){var n=this,o=n.hasError,a=n.thrownError,i=n.isStopped;o?r.error(a):i&&r.complete()},t.prototype.asObservable=function(){var r=new c;return r.source=this,r},t.create=function(r,n){return new _(r,n)},t})(c),_=(function(e){A(t,e);function t(r,n){var o=e.call(this)||this;return o.destination=r,o.source=n,o}return t.prototype.next=function(r){var n,o;(o=(n=this.destination)===null||n===void 0?void 0:n.next)===null||o===void 0||o.call(n,r)},t.prototype.error=function(r){var n,o;(o=(n=this.destination)===null||n===void 0?void 0:n.error)===null||o===void 0||o.call(n,r)},t.prototype.complete=function(){var r,n;(n=(r=this.destination)===null||r===void 0?void 0:r.complete)===null||n===void 0||n.call(r)},t.prototype._subscribe=function(r){var n,o;return(o=(n=this.source)===null||n===void 0?void 0:n.subscribe(r))!==null&&o!==void 0?o:C},t})(L);function se(e){return e[e.length-1]}function ue(e){return Z(se(e))?e.pop():void 0}var P=(function(e){return e&&typeof e.length=="number"&&typeof e!="function"});function F(e){return f(e?.then)}function T(e){return f(e[R])}function N(e){return Symbol.asyncIterator&&f(e?.[Symbol.asyncIterator])}function z(e){return new TypeError("You provided "+(e!==null&&typeof e=="object"?"an invalid object":"'"+e+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}function ce(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var G=ce();function V(e){return f(e?.[G])}function Y(e){return ee(this,arguments,function(){var r,n,o,a;return j(this,function(i){switch(i.label){case 0:r=e.getReader(),i.label=1;case 1:i.trys.push([1,,9,10]),i.label=2;case 2:return[4,g(r.read())];case 3:return n=i.sent(),o=n.value,a=n.done,a?[4,g(void 0)]:[3,5];case 4:return[2,i.sent()];case 5:return[4,g(o)];case 6:return[4,i.sent()];case 7:return i.sent(),[3,2];case 8:return[3,10];case 9:return r.releaseLock(),[7];case 10:return[2]}})})}function B(e){return f(e?.getReader)}function h(e){if(e instanceof c)return e;if(e!=null){if(T(e))return fe(e);if(P(e))return le(e);if(F(e))return de(e);if(N(e))return M(e);if(V(e))return ve(e);if(B(e))return he(e)}throw z(e)}function fe(e){return new c(function(t){var r=e[R]();if(f(r.subscribe))return r.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function le(e){return new c(function(t){for(var r=0;r<e.length&&!t.closed;r++)t.next(e[r]);t.complete()})}function de(e){return new c(function(t){e.then(function(r){t.closed||(t.next(r),t.complete())},function(r){return t.error(r)}).then(null,te)})}function ve(e){return new c(function(t){var r,n;try{for(var o=k(e),a=o.next();!a.done;a=o.next()){var i=a.value;if(t.next(i),t.closed)return}}catch(s){r={error:s}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}t.complete()})}function M(e){return new c(function(t){ye(e,t).catch(function(r){return t.error(r)})})}function he(e){return M(Y(e))}function ye(e,t){var r,n,o,a;return re(this,void 0,void 0,function(){var i,s;return j(this,function(u){switch(u.label){case 0:u.trys.push([0,5,6,11]),r=ne(e),u.label=1;case 1:return[4,r.next()];case 2:if(n=u.sent(),!!n.done)return[3,4];if(i=n.value,t.next(i),t.closed)return[2];u.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return s=u.sent(),o={error:s},[3,11];case 6:return u.trys.push([6,,9,10]),n&&!n.done&&(a=r.return)?[4,a.call(r)]:[3,8];case 7:u.sent(),u.label=8;case 8:return[3,10];case 9:if(o)throw o.error;return[7];case 10:return[7];case 11:return t.complete(),[2]}})})}function d(e,t,r,n,o){n===void 0&&(n=0),o===void 0&&(o=!1);var a=t.schedule(function(){r(),o?e.add(this.schedule(null,n)):this.unsubscribe()},n);if(e.add(a),!o)return a}function U(e,t){return t===void 0&&(t=0),b(function(r,n){r.subscribe(w(n,function(o){return d(n,e,function(){return n.next(o)},t)},function(){return d(n,e,function(){return n.complete()},t)},function(o){return d(n,e,function(){return n.error(o)},t)}))})}function q(e,t){return t===void 0&&(t=0),b(function(r,n){n.add(e.schedule(function(){return r.subscribe(n)},t))})}function me(e,t){return h(e).pipe(q(t),U(t))}function pe(e,t){return h(e).pipe(q(t),U(t))}function Se(e,t){return new c(function(r){var n=0;return t.schedule(function(){n===e.length?r.complete():(r.next(e[n++]),r.closed||this.schedule())})})}function ge(e,t){return new c(function(r){var n;return d(r,t,function(){n=e[G](),d(r,t,function(){var o,a,i;try{o=n.next(),a=o.value,i=o.done}catch(s){r.error(s);return}i?r.complete():r.next(a)},0,!0)}),function(){return f(n?.return)&&n.return()}})}function $(e,t){if(!e)throw new Error("Iterable cannot be null");return new c(function(r){d(r,t,function(){var n=e[Symbol.asyncIterator]();d(r,t,function(){n.next().then(function(o){o.done?r.complete():r.next(o.value)})},0,!0)})})}function we(e,t){return $(Y(e),t)}function be(e,t){if(e!=null){if(T(e))return me(e,t);if(P(e))return Se(e,t);if(F(e))return pe(e,t);if(N(e))return $(e,t);if(V(e))return ge(e,t);if(B(e))return we(e,t)}throw z(e)}function D(e,t){return t?be(e,t):h(e)}function Ie(e,t,r,n,o,a,i,s){var u=[],l=0,J=0,I=!1,x=function(){I&&!u.length&&!l&&t.complete()},K=function(y){return l<n?E(y):u.push(y)},E=function(y){l++;var O=!1;h(r(y,J++)).subscribe(w(t,function(m){t.next(m)},function(){O=!0},void 0,function(){if(O)try{l--;for(var m=function(){var p=u.shift();i||E(p)};u.length&&l<n;)m();x()}catch(p){t.error(p)}}))};return e.subscribe(w(t,K,function(){I=!0,x()})),function(){}}function H(e,t,r){return r===void 0&&(r=1/0),f(t)?H(function(n,o){return oe(function(a,i){return t(n,a,o,i)})(h(e(n,o)))},r):(typeof t=="number"&&(r=t),b(function(n,o){return Ie(n,o,e,r)}))}function xe(e){return H(ie,e)}function Ee(){return xe(1)}function Oe(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Ee()(D(e,ue(e)))}class v{static async getRegisteredSystemSettings(){const t=await chrome.storage.sync.get("registeredSystems");return console.log(t),t&&Array.isArray(t.registeredSystems)?t.registeredSystems:(await v.setRegisteredSystemSettings([]),[])}static async setRegisteredSystemSettings(t){console.log("Setting registered systems:",t),await chrome.storage.sync.set({registeredSystems:t})}static async getSystemStats(){const t=await chrome.storage.sync.get("systemStats");return console.log(t),t?t.systemStats:(await v.setSystemStats({}),{})}static async setSystemStats(t){await chrome.storage.sync.set({systemStats:t})}static listenForStatusChanges(){const t=new L;return chrome.storage.onChanged.addListener(r=>(r.systemStats&&t.next(r.systemStats.newValue),!0)),Oe(D(v.getSystemStats()),t.asObservable())}static async getFeatureSettings(){const t=await chrome.storage.sync.get("featureSettings");return console.log(t),t?.featureSettings}static async getNotificationSettings(){const t=await chrome.storage.sync.get("notifiactionSettings");if(t&&t.notifiactionSettings)return t.notifiactionSettings;const r={enabled:!0};return await v.setNotificationSettings(r),r}static async setNotificationSettings(t){await chrome.storage.sync.set({notifiactionSettings:t})}}export{v as S,L as a,D as f,h as i,H as m};
